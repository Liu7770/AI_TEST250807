# TestHelpers æµ‹è¯•è¾…åŠ©å·¥å…·ä½¿ç”¨æŒ‡å—

## æ¦‚è¿°

`TestHelpers` ç±»æä¾›äº†ç»Ÿä¸€çš„æµ‹è¯•è¾…åŠ©æ–¹æ³•å’Œå‹å¥½çš„é”™è¯¯æ¶ˆæ¯æ ¼å¼ï¼Œç¡®ä¿æ‰€æœ‰æµ‹è¯•æ¨¡å—éƒ½èƒ½æä¾›ä¸€è‡´çš„ã€æ˜“äºç†è§£çš„æµ‹è¯•æŠ¥å‘Šã€‚

## å‹å¥½é”™è¯¯æ¶ˆæ¯æ–¹æ³•

### 1. createFriendlyErrorMessage

ç”¨äºåˆ›å»ºæ ‡å‡†çš„è¾“å…¥è¾“å‡ºå¯¹æ¯”é”™è¯¯æ¶ˆæ¯ã€‚

```typescript
const errorMessage = TestHelpers.createFriendlyErrorMessage(
  'ä¸­æ–‡å­—ç¬¦Base64ç¼–ç åŠŸèƒ½å­˜åœ¨ç¼ºé™·',
  'ä½ å¥½ä¸–ç•Œ',
  '5L2g5aW95LiW55WM',
  'Base64 Output...',
  'è¯·æ£€æŸ¥ç½‘ç«™çš„ç¼–ç é€»è¾‘ï¼Œå¯èƒ½å­˜åœ¨å­—ç¬¦ç¼–ç è½¬æ¢é—®é¢˜'
);

// è¾“å‡ºæ ¼å¼ï¼š
// ğŸ› ä¸­æ–‡å­—ç¬¦Base64ç¼–ç åŠŸèƒ½å­˜åœ¨ç¼ºé™·ï¼
// ğŸ“ æµ‹è¯•è¾“å…¥: "ä½ å¥½ä¸–ç•Œ"
// âœ… é¢„æœŸè¾“å‡º: "5L2g5aW95LiW55WM"
// âŒ å®é™…è¾“å‡º: "Base64 Output..."
// ğŸ”§ å»ºè®®: è¯·æ£€æŸ¥ç½‘ç«™çš„ç¼–ç é€»è¾‘ï¼Œå¯èƒ½å­˜åœ¨å­—ç¬¦ç¼–ç è½¬æ¢é—®é¢˜
```

### 2. createTestFailureMessage

ç”¨äºåˆ›å»ºé€šç”¨çš„æµ‹è¯•å¤±è´¥é”™è¯¯æ¶ˆæ¯ã€‚

```typescript
const errorMessage = TestHelpers.createTestFailureMessage(
  'æŒ‰é’®çŠ¶æ€æµ‹è¯•',
  'ç©ºæ ¼è¾“å…¥æ—¶ç¼–ç æŒ‰é’®çŠ¶æ€æ£€æŸ¥',
  'æŒ‰é’®åº”è¯¥è¢«ç¦ç”¨ï¼ˆä»…åŒ…å«ç©ºæ ¼è§†ä¸ºæ— æ•ˆè¾“å…¥ï¼‰',
  'æŒ‰é’®å¤„äºå¯ç”¨çŠ¶æ€',
  'ç½‘ç«™åº”è¯¥å°†ä»…åŒ…å«ç©ºæ ¼çš„è¾“å…¥è§†ä¸ºæ— æ•ˆè¾“å…¥'
);

// è¾“å‡ºæ ¼å¼ï¼š
// ğŸ› æŒ‰é’®çŠ¶æ€æµ‹è¯•å¤±è´¥ï¼
// ğŸ“ æµ‹è¯•åœºæ™¯: ç©ºæ ¼è¾“å…¥æ—¶ç¼–ç æŒ‰é’®çŠ¶æ€æ£€æŸ¥
// âœ… é¢„æœŸè¡Œä¸º: æŒ‰é’®åº”è¯¥è¢«ç¦ç”¨ï¼ˆä»…åŒ…å«ç©ºæ ¼è§†ä¸ºæ— æ•ˆè¾“å…¥ï¼‰
// âŒ å®é™…è¡Œä¸º: æŒ‰é’®å¤„äºå¯ç”¨çŠ¶æ€
// ğŸ”§ å»ºè®®: ç½‘ç«™åº”è¯¥å°†ä»…åŒ…å«ç©ºæ ¼çš„è¾“å…¥è§†ä¸ºæ— æ•ˆè¾“å…¥
```

### 3. createUXTestFailureMessage

ç”¨äºåˆ›å»ºUXä½“éªŒç›¸å…³çš„æµ‹è¯•å¤±è´¥é”™è¯¯æ¶ˆæ¯ã€‚

```typescript
const errorMessage = TestHelpers.createUXTestFailureMessage(
  'ç©ºè¾“å…¥å¤„ç†æµ‹è¯•',
  'ç©ºè¾“å…¥ç¼–ç æ“ä½œç¼ºå°‘ç”¨æˆ·æç¤º',
  'æ˜¾ç¤ºå‹å¥½æç¤ºä¿¡æ¯ï¼ˆå¦‚"è¯·å…ˆè¾“å…¥è¦ç¼–ç çš„å†…å®¹"ï¼‰',
  'æ— ä»»ä½•æç¤ºä¿¡æ¯',
  'ç½‘ç«™åº”è¯¥åœ¨ç”¨æˆ·å°è¯•ç¼–ç ç©ºå†…å®¹æ—¶æ˜¾ç¤ºå‹å¥½æç¤ºä¿¡æ¯'
);

// è¾“å‡ºæ ¼å¼ï¼š
// ğŸ› ç©ºè¾“å…¥å¤„ç†æµ‹è¯•å¤±è´¥ï¼
// ğŸ¨ UXé—®é¢˜: ç©ºè¾“å…¥ç¼–ç æ“ä½œç¼ºå°‘ç”¨æˆ·æç¤º
// âœ… æœŸæœ›UX: æ˜¾ç¤ºå‹å¥½æç¤ºä¿¡æ¯ï¼ˆå¦‚"è¯·å…ˆè¾“å…¥è¦ç¼–ç çš„å†…å®¹"ï¼‰
// âŒ å®é™…UX: æ— ä»»ä½•æç¤ºä¿¡æ¯
// ğŸ’¡ UXæ”¹è¿›: ç½‘ç«™åº”è¯¥åœ¨ç”¨æˆ·å°è¯•ç¼–ç ç©ºå†…å®¹æ—¶æ˜¾ç¤ºå‹å¥½æç¤ºä¿¡æ¯
```

## åœ¨æµ‹è¯•ä¸­ä½¿ç”¨ç¤ºä¾‹

### åŸºæœ¬æ–­è¨€æµ‹è¯•

```typescript
test('åŠŸèƒ½æµ‹è¯•ç¤ºä¾‹', async ({ page }) => {
  try {
    // æ‰§è¡Œæµ‹è¯•æ“ä½œ
    await performSomeAction();
    
    // è·å–å®é™…ç»“æœ
    const actualResult = await getActualResult();
    const expectedResult = 'expected value';
    
    // ä½¿ç”¨å‹å¥½é”™è¯¯æ¶ˆæ¯è¿›è¡Œæ–­è¨€
    if (actualResult !== expectedResult) {
      const errorMessage = TestHelpers.createFriendlyErrorMessage(
        'åŠŸèƒ½æµ‹è¯•',
        'test input',
        expectedResult,
        actualResult,
        'è¯·æ£€æŸ¥åŠŸèƒ½å®ç°é€»è¾‘'
      );
      throw new Error(errorMessage);
    }
  } catch (error) {
    // é”™è¯¯ä¼šæ˜¾ç¤ºå‹å¥½çš„æ ¼å¼åŒ–æ¶ˆæ¯
    throw error;
  }
});
```

### UXä½“éªŒæµ‹è¯•

```typescript
test('UXä½“éªŒæµ‹è¯•ç¤ºä¾‹', async ({ page }) => {
  // æµ‹è¯•ç©ºè¾“å…¥å¤„ç†
  await inputElement.fill('');
  await clickButton();
  
  const errorMessages = await page.locator('[role="alert"]').count();
  
  if (errorMessages === 0) {
    const errorMessage = TestHelpers.createUXTestFailureMessage(
      'UXä½“éªŒæµ‹è¯•',
      'ç©ºè¾“å…¥æ“ä½œç¼ºå°‘ç”¨æˆ·æç¤º',
      'æ˜¾ç¤ºå‹å¥½æç¤ºä¿¡æ¯',
      'æ— ä»»ä½•æç¤ºä¿¡æ¯',
      'åº”è¯¥ä¸ºç”¨æˆ·æä¾›æ˜ç¡®çš„æ“ä½œæŒ‡å¯¼'
    );
    throw new Error(errorMessage);
  }
});
```

## æœ€ä½³å®è·µ

1. **ç»Ÿä¸€ä½¿ç”¨å‹å¥½é”™è¯¯æ¶ˆæ¯**ï¼šæ‰€æœ‰æµ‹è¯•å¤±è´¥æ—¶éƒ½åº”è¯¥ä½¿ç”¨ `TestHelpers` æä¾›çš„é”™è¯¯æ¶ˆæ¯æ–¹æ³•ã€‚

2. **é€‰æ‹©åˆé€‚çš„é”™è¯¯æ¶ˆæ¯ç±»å‹**ï¼š
   - è¾“å…¥è¾“å‡ºå¯¹æ¯”æµ‹è¯• â†’ `createFriendlyErrorMessage`
   - ä¸€èˆ¬åŠŸèƒ½æµ‹è¯• â†’ `createTestFailureMessage`
   - UXä½“éªŒæµ‹è¯• â†’ `createUXTestFailureMessage`

3. **æä¾›å…·ä½“çš„æ”¹è¿›å»ºè®®**ï¼šé”™è¯¯æ¶ˆæ¯ä¸­çš„å»ºè®®éƒ¨åˆ†åº”è¯¥æä¾›å…·ä½“ã€å¯æ“ä½œçš„æ”¹è¿›æ–¹å‘ã€‚

4. **ä¿æŒæ¶ˆæ¯ç®€æ´æ˜äº†**ï¼šé¿å…è¿‡é•¿çš„æè¿°ï¼Œé‡ç‚¹çªå‡ºé—®é¢˜å’Œè§£å†³æ–¹æ¡ˆã€‚

## æ‰©å±•æ–°çš„é”™è¯¯æ¶ˆæ¯ç±»å‹

å¦‚æœéœ€è¦æ–°çš„é”™è¯¯æ¶ˆæ¯æ ¼å¼ï¼Œå¯ä»¥åœ¨ `TestHelpers` ç±»ä¸­æ·»åŠ æ–°çš„é™æ€æ–¹æ³•ï¼š

```typescript
static createCustomErrorMessage(
  testName: string,
  customField1: string,
  customField2: string,
  suggestion: string
): string {
  return [
    `ğŸ› ${testName}å¤±è´¥ï¼`,
    `ğŸ“‹ è‡ªå®šä¹‰å­—æ®µ1: ${customField1}`,
    `ğŸ“‹ è‡ªå®šä¹‰å­—æ®µ2: ${customField2}`,
    `ğŸ”§ å»ºè®®: ${suggestion}`
  ].join('\n');
}
```

è¿™æ ·å¯ä»¥ç¡®ä¿æ•´ä¸ªæµ‹è¯•æ¡†æ¶çš„é”™è¯¯æ¶ˆæ¯æ ¼å¼ä¿æŒä¸€è‡´å’Œå‹å¥½ã€‚